{"version":3,"sources":["../index.mjs","script.ts"],"names":["pattern","patterns_default","fullPattern","naivePattern","getPattern","RegExp","error","list","exports","isbotNaive","userAgent","Boolean","test","isbot","createIsbot","customPattern","createIsbotFromList","list2","pattern2","join","isbotMatch","_a","_b","match","isbotMatches","map","part","filter","isbotPattern","find","isbotPatterns"],"mappings":";AAwNwH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,oBAAA,QAAA,iBAAA,EAAA,QAAA,WAAA,EAAA,QAAA,MAAA,EAAA,QAAA,KAAA,QAAA,cAAA,QAAA,aAAA,QAAA,WAAA,QAAA,aAAA,QAAA,gBAAA,EAvNxH,IAqLIA,EArLAC,EAAmB,CACrB,YACA,UACA,mBACA,6BACA,2DACA,yBACA,mBACA,kBACA,eACA,mBACA,SACA,YACA,WACA,MACA,KACA,4EACA,cACA,WACA,iBACA,sBACA,UACA,cACA,SACA,iBACA,aACA,OACA,OACA,cACA,WACA,WACA,UACA,kBACA,aACA,gBACA,aACA,cACA,SACA,YACA,aACA,YACA,UACA,WACA,UACA,YACA,UACA,UACA,UACA,kBACA,eACA,mCACA,qEACA,gBACA,WACA,WACA,WACA,SACA,OACA,WACA,UACA,QACA,QACA,QACA,QACA,OACA,YACA,eACA,OACA,SACA,WACA,YACA,SACA,OACA,cACA,aACA,QACA,YACA,aACA,oBACA,SACA,UACA,WACA,qBACA,WACA,WACA,UACA,mBACA,QACA,YACA,gBACA,UACA,mBACA,UACA,QACA,WACA,UACA,oBACA,cACA,aACA,aACA,aACA,QACA,WACA,YACA,WACA,YACA,SACA,YACA,WACA,aACA,mBACA,OACA,UACA,cACA,aACA,OACA,WACA,UACA,2BACA,QACA,cACA,aACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,aACA,UACA,UACA,cACA,OACA,QACA,WACA,WACA,WACA,YACA,YACA,SACA,OACA,YACA,UACA,aACA,UACA,QACA,cACA,YACA,QACA,QACA,SACA,SACA,SACA,QACA,YACA,aACA,SACA,SACA,aACA,eACA,UACA,YACA,QACA,UACA,aACA,MACA,YACA,WACA,aACA,YACA,aACA,WACA,UAIEC,EAAc,+1DAGdC,EAAe,gDAEnB,SAASC,IACP,GAAIJ,aAAmBK,OACrB,OAAOL,EAET,IACEA,EAAU,IAAIK,OAAOH,EAAa,KAClC,MAAOI,GACP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","file":"script.dcb41904.js","sourceRoot":"../page","sourcesContent":["// src/patterns.json\nvar patterns_default = [\n  \" daum[ /]\",\n  \" deusu/\",\n  \" yadirectfetcher\",\n  \"(?:^|[^g])news(?!sapphire)\",\n  \"(?<! (?:channel/|google/))google(?!(app|/google| pixel))\",\n  \"(?<! cu)bots?(?:\\\\b|_)\",\n  \"(?<!(?:lib))http\",\n  \"(?<![hg]m)score\",\n  \"(?<!cam)scan\",\n  \"@[a-z][\\\\w-]+\\\\.\",\n  \"\\\\(\\\\)\",\n  \"\\\\.com\\\\b\",\n  \"\\\\btime/\",\n  \"\\\\|\",\n  \"^<\",\n  \"^[\\\\w \\\\.\\\\-\\\\(?:\\\\):%]+(?:/v?\\\\d+(?:\\\\.\\\\d+)?(?:\\\\.\\\\d{1,10})*?)?(?:,|$)\",\n  \"^[^ ]{50,}$\",\n  \"^\\\\d+\\\\b\",\n  \"^\\\\w*search\\\\b\",\n  \"^\\\\w+/[\\\\w\\\\(\\\\)]*$\",\n  \"^active\",\n  \"^ad muncher\",\n  \"^amaya\",\n  \"^avsdevicesdk/\",\n  \"^biglotron\",\n  \"^bot\",\n  \"^bw/\",\n  \"^clamav[ /]\",\n  \"^client/\",\n  \"^cobweb/\",\n  \"^custom\",\n  \"^ddg[_-]android\",\n  \"^discourse\",\n  \"^dispatch/\\\\d\",\n  \"^downcast/\",\n  \"^duckduckgo\",\n  \"^email\",\n  \"^facebook\",\n  \"^getright/\",\n  \"^gozilla/\",\n  \"^hobbit\",\n  \"^hotzonu\",\n  \"^hwcdn/\",\n  \"^igetter/\",\n  \"^jeode/\",\n  \"^jetty/\",\n  \"^jigsaw\",\n  \"^microsoft bits\",\n  \"^movabletype\",\n  \"^mozilla/\\\\d\\\\.\\\\d\\\\s[\\\\w\\\\.-]+$\",\n  \"^mozilla/\\\\d\\\\.\\\\d\\\\s\\\\(compatible;?(?:\\\\s\\\\w+\\\\/\\\\d+\\\\.\\\\d+)?\\\\)$\",\n  \"^navermailapp\",\n  \"^netsurf\",\n  \"^offline\",\n  \"^openai/\",\n  \"^owler\",\n  \"^php\",\n  \"^postman\",\n  \"^python\",\n  \"^rank\",\n  \"^read\",\n  \"^reed\",\n  \"^rest\",\n  \"^rss\",\n  \"^snapchat\",\n  \"^space bison\",\n  \"^svn\",\n  \"^swcd \",\n  \"^taringa\",\n  \"^thumbor/\",\n  \"^track\",\n  \"^w3c\",\n  \"^webbandit/\",\n  \"^webcopier\",\n  \"^wget\",\n  \"^whatsapp\",\n  \"^wordpress\",\n  \"^xenu link sleuth\",\n  \"^yahoo\",\n  \"^yandex\",\n  \"^zdm/\\\\d\",\n  \"^zoom marketplace/\",\n  \"^{{.*}}$\",\n  \"analyzer\",\n  \"archive\",\n  \"ask jeeves/teoma\",\n  \"audit\",\n  \"bit\\\\.ly/\",\n  \"bluecoat drtr\",\n  \"browsex\",\n  \"burpcollaborator\",\n  \"capture\",\n  \"catch\",\n  \"check\\\\b\",\n  \"checker\",\n  \"chrome-lighthouse\",\n  \"chromeframe\",\n  \"classifier\",\n  \"cloudflare\",\n  \"convertify\",\n  \"crawl\",\n  \"cypress/\",\n  \"dareboost\",\n  \"datanyze\",\n  \"dejaclick\",\n  \"detect\",\n  \"dmbrowser\",\n  \"download\",\n  \"evc-batch/\",\n  \"exaleadcloudview\",\n  \"feed\",\n  \"firephp\",\n  \"functionize\",\n  \"gomezagent\",\n  \"grab\",\n  \"headless\",\n  \"httrack\",\n  \"hubspot marketing grader\",\n  \"hydra\",\n  \"ibisbrowser\",\n  \"infrawatch\",\n  \"insight\",\n  \"inspect\",\n  \"iplabel\",\n  \"ips-agent\",\n  \"java(?!;)\",\n  \"library\",\n  \"linkcheck\",\n  \"mail\\\\.ru/\",\n  \"manager\",\n  \"measure\",\n  \"neustar wpm\",\n  \"node\",\n  \"nutch\",\n  \"offbyone\",\n  \"onetrust\",\n  \"optimize\",\n  \"pageburst\",\n  \"pagespeed\",\n  \"parser\",\n  \"perl\",\n  \"phantomjs\",\n  \"pingdom\",\n  \"powermarks\",\n  \"preview\",\n  \"proxy\",\n  \"ptst[ /]\\\\d\",\n  \"retriever\",\n  \"rexx;\",\n  \"rigor\",\n  \"rss\\\\b\",\n  \"scrape\",\n  \"server\",\n  \"sogou\",\n  \"sparkler/\",\n  \"speedcurve\",\n  \"spider\",\n  \"splash\",\n  \"statuscake\",\n  \"supercleaner\",\n  \"synapse\",\n  \"synthetic\",\n  \"tools\",\n  \"torrent\",\n  \"transcoder\",\n  \"url\",\n  \"validator\",\n  \"virtuoso\",\n  \"wappalyzer\",\n  \"webglance\",\n  \"webkit2png\",\n  \"whatcms/\",\n  \"xtate/\"\n];\n\n// src/pattern.ts\nvar fullPattern = \" daum[ /]| deusu/| yadirectfetcher|(?:^|[^g])news(?!sapphire)|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bots?(?:\\\\b|_)|(?<!(?:lib))http|(?<![hg]m)score|(?<!cam)scan|@[a-z][\\\\w-]+\\\\.|\\\\(\\\\)|\\\\.com\\\\b|\\\\btime/|\\\\||^<|^[\\\\w \\\\.\\\\-\\\\(?:\\\\):%]+(?:/v?\\\\d+(?:\\\\.\\\\d+)?(?:\\\\.\\\\d{1,10})*?)?(?:,|$)|^[^ ]{50,}$|^\\\\d+\\\\b|^\\\\w*search\\\\b|^\\\\w+/[\\\\w\\\\(\\\\)]*$|^active|^ad muncher|^amaya|^avsdevicesdk/|^biglotron|^bot|^bw/|^clamav[ /]|^client/|^cobweb/|^custom|^ddg[_-]android|^discourse|^dispatch/\\\\d|^downcast/|^duckduckgo|^email|^facebook|^getright/|^gozilla/|^hobbit|^hotzonu|^hwcdn/|^igetter/|^jeode/|^jetty/|^jigsaw|^microsoft bits|^movabletype|^mozilla/\\\\d\\\\.\\\\d\\\\s[\\\\w\\\\.-]+$|^mozilla/\\\\d\\\\.\\\\d\\\\s\\\\(compatible;?(?:\\\\s\\\\w+\\\\/\\\\d+\\\\.\\\\d+)?\\\\)$|^navermailapp|^netsurf|^offline|^openai/|^owler|^php|^postman|^python|^rank|^read|^reed|^rest|^rss|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^track|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^wordpress|^xenu link sleuth|^yahoo|^yandex|^zdm/\\\\d|^zoom marketplace/|^{{.*}}$|analyzer|archive|ask jeeves/teoma|audit|bit\\\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check\\\\b|checker|chrome-lighthouse|chromeframe|classifier|cloudflare|convertify|crawl|cypress/|dareboost|datanyze|dejaclick|detect|dmbrowser|download|evc-batch/|exaleadcloudview|feed|firephp|functionize|gomezagent|grab|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|infrawatch|insight|inspect|iplabel|ips-agent|java(?!;)|library|linkcheck|mail\\\\.ru/|manager|measure|neustar wpm|node|nutch|offbyone|onetrust|optimize|pageburst|pagespeed|parser|perl|phantomjs|pingdom|powermarks|preview|proxy|ptst[ /]\\\\d|retriever|rexx;|rigor|rss\\\\b|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|supercleaner|synapse|synthetic|tools|torrent|transcoder|url|validator|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|xtate/\";\n\n// src/index.ts\nvar naivePattern = /bot|crawl|http|lighthouse|scan|search|spider/i;\nvar pattern;\nfunction getPattern() {\n  if (pattern instanceof RegExp) {\n    return pattern;\n  }\n  try {\n    pattern = new RegExp(fullPattern, \"i\");\n  } catch (error) {\n    pattern = naivePattern;\n  }\n  return pattern;\n}\nvar list = patterns_default;\nvar isbotNaive = (userAgent) => Boolean(userAgent) && naivePattern.test(userAgent);\nfunction isbot(userAgent) {\n  return Boolean(userAgent) && getPattern().test(userAgent);\n}\nvar createIsbot = (customPattern) => (userAgent) => Boolean(userAgent) && customPattern.test(userAgent);\nvar createIsbotFromList = (list2) => {\n  const pattern2 = new RegExp(list2.join(\"|\"), \"i\");\n  return (userAgent) => Boolean(userAgent) && pattern2.test(userAgent);\n};\nvar isbotMatch = (userAgent) => {\n  var _a, _b;\n  return (_b = (_a = userAgent == null ? void 0 : userAgent.match(getPattern())) == null ? void 0 : _a[0]) != null ? _b : null;\n};\nvar isbotMatches = (userAgent) => list.map((part) => {\n  var _a;\n  return (_a = userAgent == null ? void 0 : userAgent.match(new RegExp(part, \"i\"))) == null ? void 0 : _a[0];\n}).filter(Boolean);\nvar isbotPattern = (userAgent) => {\n  var _a;\n  return userAgent ? (_a = list.find((pattern2) => new RegExp(pattern2, \"i\").test(userAgent))) != null ? _a : null : null;\n};\nvar isbotPatterns = (userAgent) => userAgent ? list.filter((pattern2) => new RegExp(pattern2, \"i\").test(userAgent)) : [];\nexport {\n  createIsbot,\n  createIsbotFromList,\n  getPattern,\n  isbot,\n  isbotMatch,\n  isbotMatches,\n  isbotNaive,\n  isbotPattern,\n  isbotPatterns,\n  list\n};\n","import { isbot, isbotMatch, isbotPatterns } from \"..\";\n\n{\n\tconst textarea = document.querySelector(\"textarea\") as HTMLTextAreaElement;\n\tconst output = document.querySelector(\"output\") as HTMLOutputElement;\n\tconst copyLink = document.querySelector(\n\t\t'[id=\"copy-link\"]',\n\t) as HTMLButtonElement;\n\tlet timer: ReturnType<typeof setTimeout>;\n\n\tconst url = new URL(window.location.href);\n\tconst ua = url.searchParams.get(\"ua\");\n\n\ttextarea.childNodes.forEach((child) => child.parentNode?.removeChild(child));\n\ttextarea.appendChild(document.createTextNode(ua || navigator.userAgent));\n\ttextarea.addEventListener(\"keyup\", change);\n\ttextarea.addEventListener(\"paste\", change);\n\ttextarea.addEventListener(\"focus\", () => textarea.select());\n\tcheck();\n\n\tfunction change({ target }: Event): void {\n\t\tconst { value } = target as HTMLTextAreaElement;\n\t\tclearTimeout(timer);\n\t\ttimer = setTimeout(check, 200, value);\n\t}\n\n\tfunction append(\n\t\tparent: DocumentFragment,\n\t\ttag: string | null,\n\t\tstring: string | boolean | null,\n\t): void {\n\t\tif (tag) {\n\t\t\tconst ele = document.createElement(\"kbd\");\n\t\t\tele.appendChild(document.createTextNode(`${string}`));\n\t\t\tparent.appendChild(ele);\n\t\t} else {\n\t\t\tparent.appendChild(document.createTextNode(`${string}`));\n\t\t}\n\t}\n\n\tfunction details(ua: string): DocumentFragment {\n\t\tconst fragment = document.createDocumentFragment();\n\t\tconst is = isbot(ua);\n\n\t\tif (is) {\n\t\t\tconst found = isbotMatch(ua) as string;\n\t\t\tconst patterns = isbotPatterns(ua);\n\t\t\tconst pattern = patterns.find((pattern: string): boolean =>\n\t\t\t\tnew RegExp(pattern, \"i\").test(found),\n\t\t\t) as string;\n\t\t\tconsole.log(patterns, pattern);\n\t\t\tappend(fragment, null, \"I think so, yes\\n\");\n\t\t\tappend(fragment, null, \"The substring \");\n\t\t\tappend(fragment, \"kbd\", found);\n\t\t\tappend(fragment, null, \" matches the pattern \");\n\t\t\tappend(fragment, \"kbd\", pattern);\n\t\t} else {\n\t\t\tappend(\n\t\t\t\tfragment,\n\t\t\t\tnull,\n\t\t\t\t\"I don't think so, no\\nI could not find a pattern I recognise\",\n\t\t\t);\n\t\t}\n\t\treturn fragment;\n\t}\n\n\tfunction check(value = textarea.innerHTML): void {\n\t\tvalue = value.trim();\n\t\twhile (output.firstChild) {\n\t\t\toutput.removeChild(output.firstChild);\n\t\t}\n\t\tif (value === \"\") {\n\t\t\toutput.appendChild(\n\t\t\t\tdocument.createTextNode(\"Insert user agent string in the text box\"),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\toutput.appendChild(details(value));\n\t}\n\n\tcopyLink.addEventListener(\"click\", (event: Event): void => {\n\t\tevent.preventDefault();\n\t\tconst { protocol, host, pathname } = document.location;\n\t\tnavigator.clipboard.writeText(\n\t\t\t[\n\t\t\t\tprotocol,\n\t\t\t\t\"//\",\n\t\t\t\thost,\n\t\t\t\tpathname,\n\t\t\t\t\"?ua=\",\n\t\t\t\tencodeURIComponent(textarea.value),\n\t\t\t].join(\"\"),\n\t\t);\n\t\tconst dialog = document.createElement(\"dialog\");\n\t\tdialog.appendChild(document.createTextNode(\"copied to clipboard\"));\n\t\tdocument.body.appendChild(dialog);\n\t\tdialog.showModal();\n\t\tsetTimeout((): void => {\n\t\t\tdialog.addEventListener(\"transitionend\", () => {\n\t\t\t\tdialog.close();\n\t\t\t\tdocument.body.removeChild(dialog);\n\t\t\t});\n\t\t\tdialog.style.opacity = \"0\";\n\t\t}, 1000);\n\t});\n}\n"]}